From 2e9c9b792fd34b4fe1fb524444529f41bcb1b7c5 Mon Sep 17 00:00:00 2001
From: Rich Ercolani <rincebrain@gmail.com>
Date: Thu, 23 Mar 2023 06:49:04 -0400
Subject: [PATCH] go away

---
 config/kernel-generic_io_acct.m4              | 3 ++-
 include/os/linux/kernel/linux/blkdev_compat.h | 2 +-
 2 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/config/kernel-generic_io_acct.m4 b/config/kernel-generic_io_acct.m4
index 2e30c480030..c7b700c5d40 100644
--- a/config/kernel-generic_io_acct.m4
+++ b/config/kernel-generic_io_acct.m4
@@ -11,7 +11,7 @@ AC_DEFUN([ZFS_AC_KERNEL_SRC_GENERIC_IO_ACCT], [
 		unsigned long start_time;
 
 		start_time = bdev_start_io_acct(bdev, bio_op(bio),
-		    bio_sectors(bio), passed_time);
+		    passed_time);
 		bdev_end_io_acct(bdev, bio_op(bio), bio_sectors(bio), start_time);
 	])
 
@@ -92,6 +92,7 @@ AC_DEFUN([ZFS_AC_KERNEL_GENERIC_IO_ACCT], [
 			AC_MSG_RESULT(yes)
 			AC_DEFINE(HAVE_BDEV_IO_ACCT_OLD, 1, [bdev_*_io_acct() available])
 		], [
+		AC_MSG_RESULT(no)
 		dnl #
 		dnl # 5.12 API,
 		dnl #
diff --git a/include/os/linux/kernel/linux/blkdev_compat.h b/include/os/linux/kernel/linux/blkdev_compat.h
index 470abbd3454..c6cc743c866 100644
--- a/include/os/linux/kernel/linux/blkdev_compat.h
+++ b/include/os/linux/kernel/linux/blkdev_compat.h
@@ -594,7 +594,7 @@ blk_generic_start_io_acct(struct request_queue *q __attribute__((unused)),
 {
 #if defined(HAVE_BDEV_IO_ACCT_62)
 	return (bdev_start_io_acct(bio->bi_bdev, bio_op(bio),
-	    bio_sectors(bio), jiffies));
+	    jiffies));
 #elif defined(HAVE_BDEV_IO_ACCT_OLD)
 	return (bdev_start_io_acct(bio->bi_bdev, bio_sectors(bio),
 	    bio_op(bio), jiffies));

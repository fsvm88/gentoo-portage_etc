diff -Nuar bluez-5.50.orig/profiles/midi/midi.c bluez-5.50/profiles/midi/midi.c
--- bluez-5.50.orig/profiles/midi/midi.c	2018-06-01 10:37:36.000000000 +0200
+++ bluez-5.50/profiles/midi/midi.c	2019-02-13 21:49:20.289659255 +0100
@@ -71,20 +71,20 @@
 	struct midi_write_parser midi_out;
 };
 
+void foreach_cb(const struct midi_write_parser *parser, void *user_data) {
+	struct midi *midi = user_data;
+	bt_gatt_client_write_without_response(midi->client,
+	                                      midi->midi_io_handle,
+	                                      false,
+	                                      midi_write_data(parser),
+	                                      midi_write_data_size(parser));
+};
+
 static bool midi_write_cb(struct io *io, void *user_data)
 {
 	struct midi *midi = user_data;
 	int err;
 
-	void foreach_cb(const struct midi_write_parser *parser, void *user_data) {
-		struct midi *midi = user_data;
-		bt_gatt_client_write_without_response(midi->client,
-		                                      midi->midi_io_handle,
-		                                      false,
-		                                      midi_write_data(parser),
-		                                      midi_write_data_size(parser));
-	};
-
 	do {
 		snd_seq_event_t *event = NULL;
 
